{"ast":null,"code":"// src/components/InvestmentsComponent/PortfolioGraph.jsx\nimport React,{useEffect,useState,useRef}from\"react\";import{AreaChart,Area,XAxis,YAxis,Tooltip,ResponsiveContainer}from\"recharts\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const TIMEFRAMES=[{label:\"1D\",span:\"day\",interval:\"5minute\"},{label:\"1W\",span:\"week\",interval:\"hour\"},{label:\"1M\",span:\"month\",interval:\"hour\"},{label:\"3M\",span:\"3month\",interval:\"day\"},{label:\"1Y\",span:\"year\",interval:\"day\"},{label:\"5Y\",span:\"5year\",interval:\"day\"}];const getNiceDomain=function(min,max){let ticks=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;if(min===max)return[Math.floor(min),Math.ceil(max)];const range=max-min;const roughStep=range/(ticks-1);const magnitude=Math.pow(10,Math.floor(Math.log10(roughStep)));const niceStep=Math.ceil(roughStep/magnitude)*magnitude;return[Math.floor(min/niceStep)*niceStep,Math.ceil(max/niceStep)*niceStep];};// CustomTooltip component moved outside and made pure\nconst CustomTooltip=_ref=>{let{active,payload,label,onHover}=_ref;useEffect(()=>{if(active&&payload&&payload.length){const value=payload[0].value;onHover(value);}else{onHover(null);}},[active,payload,onHover]);if(active&&payload&&payload.length){const date=new Date(label);const formattedTime=date.toLocaleTimeString(\"en-US\",{hour:\"2-digit\",minute:\"2-digit\",hour12:false});const formattedDate=date.toLocaleDateString(\"en-US\",{month:\"short\",day:\"numeric\",year:\"numeric\"});return/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"0.8rem\",color:\"#666\",pointerEvents:\"none\"},children:[formattedDate,\" \",formattedTime]});}return null;};export const PortfolioGraph=()=>{const[history,setHistory]=useState([]);const[portfolioValue,setPortfolioValue]=useState(0);const[change,setChange]=useState(0);const[timeframe,setTimeframe]=useState(TIMEFRAMES[0]);const[yDomain,setYDomain]=useState([0,\"auto\"]);const[loading,setLoading]=useState(false);// Track hovered point\nconst[hoveredValue,setHoveredValue]=useState(null);const[hoveredChange,setHoveredChange]=useState(null);const abortControllerRef=useRef(null);const debounceRef=useRef(null);const MAX_POINTS=400;const fetchHistory=async tf=>{var _abortControllerRef$c,_abortControllerRef$c2;if(abortControllerRef.current)(_abortControllerRef$c=(_abortControllerRef$c2=abortControllerRef.current).abort)===null||_abortControllerRef$c===void 0?void 0:_abortControllerRef$c.call(_abortControllerRef$c2);const controller=new AbortController();abortControllerRef.current=controller;setLoading(true);try{const res=await fetch(\"http://127.0.0.1:5000/api/portfolio/history?span=\".concat(tf.span,\"&interval=\").concat(tf.interval,\"&max_points=\").concat(MAX_POINTS),{signal:controller.signal});const data=await res.json();if(!Array.isArray(data)||data.length===0){setHistory([]);setYDomain([0,\"auto\"]);setPortfolioValue(0);setChange(0);return;}const formatted=data.map(p=>({timestamp:new Date(p.timestamp).getTime(),market_value:Number(p.market_value)})).sort((a,b)=>a.timestamp-b.timestamp);setHistory(formatted);const latest=formatted[formatted.length-1].market_value;const prev=formatted[0].market_value;setPortfolioValue(latest);setChange(Number((latest-prev).toFixed(2)));const min=Math.min(...formatted.map(d=>d.market_value));const max=Math.max(...formatted.map(d=>d.market_value));setYDomain(getNiceDomain(min,max));}catch(err){if(err.name!==\"AbortError\")console.error(\"History fetch failed:\",err);}finally{setLoading(false);}};useEffect(()=>{if(debounceRef.current)clearTimeout(debounceRef.current);debounceRef.current=setTimeout(()=>fetchHistory(timeframe),150);const intervalId=setInterval(()=>fetchHistory(timeframe),30000);return()=>{var _abortControllerRef$c3,_abortControllerRef$c4;clearTimeout(debounceRef.current);clearInterval(intervalId);(_abortControllerRef$c3=abortControllerRef.current)===null||_abortControllerRef$c3===void 0?void 0:(_abortControllerRef$c4=_abortControllerRef$c3.abort)===null||_abortControllerRef$c4===void 0?void 0:_abortControllerRef$c4.call(_abortControllerRef$c3);};},[timeframe]);// Handle tooltip hover\nconst handleTooltipHover=value=>{if(value!==null&&history.length>0){const baselineValue=history[0].market_value;const pointChange=value-baselineValue;setHoveredValue(value);setHoveredChange(pointChange);}else{setHoveredValue(null);setHoveredChange(null);}};const displayValue=hoveredValue!==null?hoveredValue:portfolioValue;const displayChange=hoveredChange!==null?hoveredChange:change;const percentChange=history.length>0?(displayChange/history[0].market_value*100).toFixed(2):\"0.00\";const isGain=history.length>1&&history[history.length-1].market_value>=history[0].market_value;return/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-graph-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"graph-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-value\",children:[\"$\",displayValue.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-change \".concat(displayChange>=0?\"gain\":\"loss\"),children:[displayChange>=0?\"▲\":\"▼\",\" \",displayChange.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2}),\" \",\"(\",percentChange,\"%)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeframe-selector\",children:[TIMEFRAMES.map(tf=>/*#__PURE__*/_jsx(\"button\",{className:\"timeframe-btn \".concat(tf.label===timeframe.label?\"active\":\"\"),onClick:()=>setTimeframe(tf),children:tf.label},tf.label)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",style:{flex:1,minHeight:0},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(AreaChart,{data:history,margin:{top:0,right:0,left:0,bottom:0},children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"timestamp\",type:\"number\",scale:\"time\",domain:[\"dataMin\",\"dataMax\"],tick:false,axisLine:false,height:0}),/*#__PURE__*/_jsx(YAxis,{domain:yDomain,tickFormatter:v=>v.toFixed(2),width:0,tick:false,line:false,axisLine:false}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{onHover:handleTooltipHover})}),/*#__PURE__*/_jsx(Area,{type:\"linear\",dataKey:\"market_value\",stroke:isGain?\"#16a34a\":\"#dc2626\",strokeWidth:2,fill:isGain?\"#16a34a33\":\"#dc262633\",isAnimationActive:false,dot:false,activeDot:{r:4}})]})})})]});};export default PortfolioGraph;","map":{"version":3,"names":["React","useEffect","useState","useRef","AreaChart","Area","XAxis","YAxis","Tooltip","ResponsiveContainer","jsxs","_jsxs","jsx","_jsx","TIMEFRAMES","label","span","interval","getNiceDomain","min","max","ticks","arguments","length","undefined","Math","floor","ceil","range","roughStep","magnitude","pow","log10","niceStep","CustomTooltip","_ref","active","payload","onHover","value","date","Date","formattedTime","toLocaleTimeString","hour","minute","hour12","formattedDate","toLocaleDateString","month","day","year","style","fontSize","color","pointerEvents","children","PortfolioGraph","history","setHistory","portfolioValue","setPortfolioValue","change","setChange","timeframe","setTimeframe","yDomain","setYDomain","loading","setLoading","hoveredValue","setHoveredValue","hoveredChange","setHoveredChange","abortControllerRef","debounceRef","MAX_POINTS","fetchHistory","tf","_abortControllerRef$c","_abortControllerRef$c2","current","abort","call","controller","AbortController","res","fetch","concat","signal","data","json","Array","isArray","formatted","map","p","timestamp","getTime","market_value","Number","sort","a","b","latest","prev","toFixed","d","err","name","console","error","clearTimeout","setTimeout","intervalId","setInterval","_abortControllerRef$c3","_abortControllerRef$c4","clearInterval","handleTooltipHover","baselineValue","pointChange","displayValue","displayChange","percentChange","isGain","className","toLocaleString","minimumFractionDigits","maximumFractionDigits","onClick","flex","minHeight","width","height","margin","top","right","left","bottom","dataKey","type","scale","domain","tick","axisLine","tickFormatter","v","line","content","stroke","strokeWidth","fill","isAnimationActive","dot","activeDot","r"],"sources":["/Users/donaldtan/dons-website/frontend/src/components/InvestmentsComponent/PortfolioGraph.js"],"sourcesContent":["// src/components/InvestmentsComponent/PortfolioGraph.jsx\nimport React, { useEffect, useState, useRef } from \"react\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n} from \"recharts\";\n\nconst TIMEFRAMES = [\n  { label: \"1D\", span: \"day\", interval: \"5minute\" },\n  { label: \"1W\", span: \"week\", interval: \"hour\" },\n  { label: \"1M\", span: \"month\", interval: \"hour\" },\n  { label: \"3M\", span: \"3month\", interval: \"day\" },\n  { label: \"1Y\", span: \"year\", interval: \"day\" },\n  { label: \"5Y\", span: \"5year\", interval: \"day\" },\n];\n\nconst getNiceDomain = (min, max, ticks = 5) => {\n  if (min === max) return [Math.floor(min), Math.ceil(max)];\n  const range = max - min;\n  const roughStep = range / (ticks - 1);\n  const magnitude = Math.pow(10, Math.floor(Math.log10(roughStep)));\n  const niceStep = Math.ceil(roughStep / magnitude) * magnitude;\n  return [\n    Math.floor(min / niceStep) * niceStep,\n    Math.ceil(max / niceStep) * niceStep,\n  ];\n};\n\n// CustomTooltip component moved outside and made pure\nconst CustomTooltip = ({ active, payload, label, onHover }) => {\n  useEffect(() => {\n    if (active && payload && payload.length) {\n      const value = payload[0].value;\n      onHover(value);\n    } else {\n      onHover(null);\n    }\n  }, [active, payload, onHover]);\n\n  if (active && payload && payload.length) {\n    const date = new Date(label);\n    const formattedTime = date.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      hour12: false,\n    });\n    const formattedDate = date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n\n    return (\n      <div\n        style={{\n          fontSize: \"0.8rem\",\n          color: \"#666\",\n          pointerEvents: \"none\",\n        }}\n      >\n        {formattedDate} {formattedTime}\n      </div>\n    );\n  }\n  return null;\n};\n\nexport const PortfolioGraph = () => {\n  const [history, setHistory] = useState([]);\n  const [portfolioValue, setPortfolioValue] = useState(0);\n  const [change, setChange] = useState(0);\n  const [timeframe, setTimeframe] = useState(TIMEFRAMES[0]);\n  const [yDomain, setYDomain] = useState([0, \"auto\"]);\n  const [loading, setLoading] = useState(false);\n\n  // Track hovered point\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const [hoveredChange, setHoveredChange] = useState(null);\n\n  const abortControllerRef = useRef(null);\n  const debounceRef = useRef(null);\n\n  const MAX_POINTS = 400;\n\n  const fetchHistory = async (tf) => {\n    if (abortControllerRef.current) abortControllerRef.current.abort?.();\n    const controller = new AbortController();\n    abortControllerRef.current = controller;\n\n    setLoading(true);\n    try {\n      const res = await fetch(\n        `http://127.0.0.1:5000/api/portfolio/history?span=${tf.span}&interval=${tf.interval}&max_points=${MAX_POINTS}`,\n        { signal: controller.signal }\n      );\n      const data = await res.json();\n\n      if (!Array.isArray(data) || data.length === 0) {\n        setHistory([]);\n        setYDomain([0, \"auto\"]);\n        setPortfolioValue(0);\n        setChange(0);\n        return;\n      }\n\n      const formatted = data\n        .map((p) => ({\n          timestamp: new Date(p.timestamp).getTime(),\n          market_value: Number(p.market_value),\n        }))\n        .sort((a, b) => a.timestamp - b.timestamp);\n\n      setHistory(formatted);\n\n      const latest = formatted[formatted.length - 1].market_value;\n      const prev = formatted[0].market_value;\n      setPortfolioValue(latest);\n      setChange(Number((latest - prev).toFixed(2)));\n\n      const min = Math.min(...formatted.map((d) => d.market_value));\n      const max = Math.max(...formatted.map((d) => d.market_value));\n      setYDomain(getNiceDomain(min, max));\n    } catch (err) {\n      if (err.name !== \"AbortError\")\n        console.error(\"History fetch failed:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (debounceRef.current) clearTimeout(debounceRef.current);\n    debounceRef.current = setTimeout(() => fetchHistory(timeframe), 150);\n    const intervalId = setInterval(() => fetchHistory(timeframe), 30000);\n    return () => {\n      clearTimeout(debounceRef.current);\n      clearInterval(intervalId);\n      abortControllerRef.current?.abort?.();\n    };\n  }, [timeframe]);\n\n  // Handle tooltip hover\n  const handleTooltipHover = (value) => {\n    if (value !== null && history.length > 0) {\n      const baselineValue = history[0].market_value;\n      const pointChange = value - baselineValue;\n      setHoveredValue(value);\n      setHoveredChange(pointChange);\n    } else {\n      setHoveredValue(null);\n      setHoveredChange(null);\n    }\n  };\n\n  const displayValue = hoveredValue !== null ? hoveredValue : portfolioValue;\n  const displayChange = hoveredChange !== null ? hoveredChange : change;\n\n  const percentChange =\n    history.length > 0\n      ? ((displayChange / history[0].market_value) * 100).toFixed(2)\n      : \"0.00\";\n\n  const isGain =\n    history.length > 1 &&\n    history[history.length - 1].market_value >= history[0].market_value;\n\n  return (\n    <div className=\"portfolio-graph-card\">\n      {/* Header */}\n      <div className=\"graph-header\">\n        <div className=\"portfolio-value\">\n          $\n          {displayValue.toLocaleString(undefined, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n          })}\n        </div>\n        <div\n          className={`portfolio-change ${displayChange >= 0 ? \"gain\" : \"loss\"}`}\n        >\n          {displayChange >= 0 ? \"▲\" : \"▼\"}{\" \"}\n          {displayChange.toLocaleString(undefined, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n          })}{\" \"}\n          ({percentChange}%)\n        </div>\n      </div>\n\n      {/* Timeframe Selector */}\n      <div className=\"timeframe-selector\">\n        {TIMEFRAMES.map((tf) => (\n          <button\n            key={tf.label}\n            className={`timeframe-btn ${\n              tf.label === timeframe.label ? \"active\" : \"\"\n            }`}\n            onClick={() => setTimeframe(tf)}\n          >\n            {tf.label}\n          </button>\n        ))}\n        {loading && <div className=\"loader\" />}\n      </div>\n\n      {/* Chart */}\n      <div className=\"chart-container\" style={{ flex: 1, minHeight: 0 }}>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart\n            data={history}\n            margin={{ top: 0, right: 0, left: 0, bottom: 0 }}\n          >\n            <XAxis\n              dataKey=\"timestamp\"\n              type=\"number\"\n              scale=\"time\"\n              domain={[\"dataMin\", \"dataMax\"]}\n              tick={false}\n              axisLine={false}\n              height={0}\n            />\n            <YAxis\n              domain={yDomain}\n              tickFormatter={(v) => v.toFixed(2)}\n              width={0}\n              tick={false}\n              line={false}\n              axisLine={false}\n            />\n            <Tooltip content={<CustomTooltip onHover={handleTooltipHover} />} />\n            <Area\n              type=\"linear\"\n              dataKey=\"market_value\"\n              stroke={isGain ? \"#16a34a\" : \"#dc2626\"}\n              strokeWidth={2}\n              fill={isGain ? \"#16a34a33\" : \"#dc262633\"}\n              isAnimationActive={false}\n              dot={false}\n              activeDot={{ r: 4 }}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default PortfolioGraph;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OACEC,SAAS,CACTC,IAAI,CACJC,KAAK,CACLC,KAAK,CACLC,OAAO,CACPC,mBAAmB,KACd,UAAU,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAElB,KAAM,CAAAC,UAAU,CAAG,CACjB,CAAEC,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,KAAK,CAAEC,QAAQ,CAAE,SAAU,CAAC,CACjD,CAAEF,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,MAAO,CAAC,CAC/C,CAAEF,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,QAAQ,CAAE,MAAO,CAAC,CAChD,CAAEF,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,QAAQ,CAAEC,QAAQ,CAAE,KAAM,CAAC,CAChD,CAAEF,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,KAAM,CAAC,CAC9C,CAAEF,KAAK,CAAE,IAAI,CAAEC,IAAI,CAAE,OAAO,CAAEC,QAAQ,CAAE,KAAM,CAAC,CAChD,CAED,KAAM,CAAAC,aAAa,CAAG,QAAAA,CAACC,GAAG,CAAEC,GAAG,CAAgB,IAAd,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CACxC,GAAIH,GAAG,GAAKC,GAAG,CAAE,MAAO,CAACK,IAAI,CAACC,KAAK,CAACP,GAAG,CAAC,CAAEM,IAAI,CAACE,IAAI,CAACP,GAAG,CAAC,CAAC,CACzD,KAAM,CAAAQ,KAAK,CAAGR,GAAG,CAAGD,GAAG,CACvB,KAAM,CAAAU,SAAS,CAAGD,KAAK,EAAIP,KAAK,CAAG,CAAC,CAAC,CACrC,KAAM,CAAAS,SAAS,CAAGL,IAAI,CAACM,GAAG,CAAC,EAAE,CAAEN,IAAI,CAACC,KAAK,CAACD,IAAI,CAACO,KAAK,CAACH,SAAS,CAAC,CAAC,CAAC,CACjE,KAAM,CAAAI,QAAQ,CAAGR,IAAI,CAACE,IAAI,CAACE,SAAS,CAAGC,SAAS,CAAC,CAAGA,SAAS,CAC7D,MAAO,CACLL,IAAI,CAACC,KAAK,CAACP,GAAG,CAAGc,QAAQ,CAAC,CAAGA,QAAQ,CACrCR,IAAI,CAACE,IAAI,CAACP,GAAG,CAAGa,QAAQ,CAAC,CAAGA,QAAQ,CACrC,CACH,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAGC,IAAA,EAAyC,IAAxC,CAAEC,MAAM,CAAEC,OAAO,CAAEtB,KAAK,CAAEuB,OAAQ,CAAC,CAAAH,IAAA,CACxDlC,SAAS,CAAC,IAAM,CACd,GAAImC,MAAM,EAAIC,OAAO,EAAIA,OAAO,CAACd,MAAM,CAAE,CACvC,KAAM,CAAAgB,KAAK,CAAGF,OAAO,CAAC,CAAC,CAAC,CAACE,KAAK,CAC9BD,OAAO,CAACC,KAAK,CAAC,CAChB,CAAC,IAAM,CACLD,OAAO,CAAC,IAAI,CAAC,CACf,CACF,CAAC,CAAE,CAACF,MAAM,CAAEC,OAAO,CAAEC,OAAO,CAAC,CAAC,CAE9B,GAAIF,MAAM,EAAIC,OAAO,EAAIA,OAAO,CAACd,MAAM,CAAE,CACvC,KAAM,CAAAiB,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC1B,KAAK,CAAC,CAC5B,KAAM,CAAA2B,aAAa,CAAGF,IAAI,CAACG,kBAAkB,CAAC,OAAO,CAAE,CACrDC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,KACV,CAAC,CAAC,CACF,KAAM,CAAAC,aAAa,CAAGP,IAAI,CAACQ,kBAAkB,CAAC,OAAO,CAAE,CACrDC,KAAK,CAAE,OAAO,CACdC,GAAG,CAAE,SAAS,CACdC,IAAI,CAAE,SACR,CAAC,CAAC,CAEF,mBACExC,KAAA,QACEyC,KAAK,CAAE,CACLC,QAAQ,CAAE,QAAQ,CAClBC,KAAK,CAAE,MAAM,CACbC,aAAa,CAAE,MACjB,CAAE,CAAAC,QAAA,EAEDT,aAAa,CAAC,GAAC,CAACL,aAAa,EAC3B,CAAC,CAEV,CACA,MAAO,KAAI,CACb,CAAC,CAED,MAAO,MAAM,CAAAe,cAAc,CAAGA,CAAA,GAAM,CAClC,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGzD,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC0D,cAAc,CAAEC,iBAAiB,CAAC,CAAG3D,QAAQ,CAAC,CAAC,CAAC,CACvD,KAAM,CAAC4D,MAAM,CAAEC,SAAS,CAAC,CAAG7D,QAAQ,CAAC,CAAC,CAAC,CACvC,KAAM,CAAC8D,SAAS,CAAEC,YAAY,CAAC,CAAG/D,QAAQ,CAACY,UAAU,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,CAACoD,OAAO,CAAEC,UAAU,CAAC,CAAGjE,QAAQ,CAAC,CAAC,CAAC,CAAE,MAAM,CAAC,CAAC,CACnD,KAAM,CAACkE,OAAO,CAAEC,UAAU,CAAC,CAAGnE,QAAQ,CAAC,KAAK,CAAC,CAE7C;AACA,KAAM,CAACoE,YAAY,CAAEC,eAAe,CAAC,CAAGrE,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACsE,aAAa,CAAEC,gBAAgB,CAAC,CAAGvE,QAAQ,CAAC,IAAI,CAAC,CAExD,KAAM,CAAAwE,kBAAkB,CAAGvE,MAAM,CAAC,IAAI,CAAC,CACvC,KAAM,CAAAwE,WAAW,CAAGxE,MAAM,CAAC,IAAI,CAAC,CAEhC,KAAM,CAAAyE,UAAU,CAAG,GAAG,CAEtB,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,EAAE,EAAK,KAAAC,qBAAA,CAAAC,sBAAA,CACjC,GAAIN,kBAAkB,CAACO,OAAO,CAAE,CAAAF,qBAAA,EAAAC,sBAAA,CAAAN,kBAAkB,CAACO,OAAO,EAACC,KAAK,UAAAH,qBAAA,iBAAhCA,qBAAA,CAAAI,IAAA,CAAAH,sBAAmC,CAAC,CACpE,KAAM,CAAAI,UAAU,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CACxCX,kBAAkB,CAACO,OAAO,CAAGG,UAAU,CAEvCf,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAiB,GAAG,CAAG,KAAM,CAAAC,KAAK,qDAAAC,MAAA,CAC+BV,EAAE,CAAC9D,IAAI,eAAAwE,MAAA,CAAaV,EAAE,CAAC7D,QAAQ,iBAAAuE,MAAA,CAAeZ,UAAU,EAC5G,CAAEa,MAAM,CAAEL,UAAU,CAACK,MAAO,CAC9B,CAAC,CACD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACK,IAAI,CAAC,CAAC,CAE7B,GAAI,CAACC,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,EAAIA,IAAI,CAACnE,MAAM,GAAK,CAAC,CAAE,CAC7CoC,UAAU,CAAC,EAAE,CAAC,CACdQ,UAAU,CAAC,CAAC,CAAC,CAAE,MAAM,CAAC,CAAC,CACvBN,iBAAiB,CAAC,CAAC,CAAC,CACpBE,SAAS,CAAC,CAAC,CAAC,CACZ,OACF,CAEA,KAAM,CAAA+B,SAAS,CAAGJ,IAAI,CACnBK,GAAG,CAAEC,CAAC,GAAM,CACXC,SAAS,CAAE,GAAI,CAAAxD,IAAI,CAACuD,CAAC,CAACC,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,CAC1CC,YAAY,CAAEC,MAAM,CAACJ,CAAC,CAACG,YAAY,CACrC,CAAC,CAAC,CAAC,CACFE,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACL,SAAS,CAAGM,CAAC,CAACN,SAAS,CAAC,CAE5CtC,UAAU,CAACmC,SAAS,CAAC,CAErB,KAAM,CAAAU,MAAM,CAAGV,SAAS,CAACA,SAAS,CAACvE,MAAM,CAAG,CAAC,CAAC,CAAC4E,YAAY,CAC3D,KAAM,CAAAM,IAAI,CAAGX,SAAS,CAAC,CAAC,CAAC,CAACK,YAAY,CACtCtC,iBAAiB,CAAC2C,MAAM,CAAC,CACzBzC,SAAS,CAACqC,MAAM,CAAC,CAACI,MAAM,CAAGC,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAE7C,KAAM,CAAAvF,GAAG,CAAGM,IAAI,CAACN,GAAG,CAAC,GAAG2E,SAAS,CAACC,GAAG,CAAEY,CAAC,EAAKA,CAAC,CAACR,YAAY,CAAC,CAAC,CAC7D,KAAM,CAAA/E,GAAG,CAAGK,IAAI,CAACL,GAAG,CAAC,GAAG0E,SAAS,CAACC,GAAG,CAAEY,CAAC,EAAKA,CAAC,CAACR,YAAY,CAAC,CAAC,CAC7DhC,UAAU,CAACjD,aAAa,CAACC,GAAG,CAAEC,GAAG,CAAC,CAAC,CACrC,CAAE,MAAOwF,GAAG,CAAE,CACZ,GAAIA,GAAG,CAACC,IAAI,GAAK,YAAY,CAC3BC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEH,GAAG,CAAC,CAC/C,CAAC,OAAS,CACRvC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDpE,SAAS,CAAC,IAAM,CACd,GAAI0E,WAAW,CAACM,OAAO,CAAE+B,YAAY,CAACrC,WAAW,CAACM,OAAO,CAAC,CAC1DN,WAAW,CAACM,OAAO,CAAGgC,UAAU,CAAC,IAAMpC,YAAY,CAACb,SAAS,CAAC,CAAE,GAAG,CAAC,CACpE,KAAM,CAAAkD,UAAU,CAAGC,WAAW,CAAC,IAAMtC,YAAY,CAACb,SAAS,CAAC,CAAE,KAAK,CAAC,CACpE,MAAO,IAAM,KAAAoD,sBAAA,CAAAC,sBAAA,CACXL,YAAY,CAACrC,WAAW,CAACM,OAAO,CAAC,CACjCqC,aAAa,CAACJ,UAAU,CAAC,CACzB,CAAAE,sBAAA,CAAA1C,kBAAkB,CAACO,OAAO,UAAAmC,sBAAA,kBAAAC,sBAAA,CAA1BD,sBAAA,CAA4BlC,KAAK,UAAAmC,sBAAA,iBAAjCA,sBAAA,CAAAlC,IAAA,CAAAiC,sBAAoC,CAAC,CACvC,CAAC,CACH,CAAC,CAAE,CAACpD,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAuD,kBAAkB,CAAIhF,KAAK,EAAK,CACpC,GAAIA,KAAK,GAAK,IAAI,EAAImB,OAAO,CAACnC,MAAM,CAAG,CAAC,CAAE,CACxC,KAAM,CAAAiG,aAAa,CAAG9D,OAAO,CAAC,CAAC,CAAC,CAACyC,YAAY,CAC7C,KAAM,CAAAsB,WAAW,CAAGlF,KAAK,CAAGiF,aAAa,CACzCjD,eAAe,CAAChC,KAAK,CAAC,CACtBkC,gBAAgB,CAACgD,WAAW,CAAC,CAC/B,CAAC,IAAM,CACLlD,eAAe,CAAC,IAAI,CAAC,CACrBE,gBAAgB,CAAC,IAAI,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAAiD,YAAY,CAAGpD,YAAY,GAAK,IAAI,CAAGA,YAAY,CAAGV,cAAc,CAC1E,KAAM,CAAA+D,aAAa,CAAGnD,aAAa,GAAK,IAAI,CAAGA,aAAa,CAAGV,MAAM,CAErE,KAAM,CAAA8D,aAAa,CACjBlE,OAAO,CAACnC,MAAM,CAAG,CAAC,CACd,CAAEoG,aAAa,CAAGjE,OAAO,CAAC,CAAC,CAAC,CAACyC,YAAY,CAAI,GAAG,EAAEO,OAAO,CAAC,CAAC,CAAC,CAC5D,MAAM,CAEZ,KAAM,CAAAmB,MAAM,CACVnE,OAAO,CAACnC,MAAM,CAAG,CAAC,EAClBmC,OAAO,CAACA,OAAO,CAACnC,MAAM,CAAG,CAAC,CAAC,CAAC4E,YAAY,EAAIzC,OAAO,CAAC,CAAC,CAAC,CAACyC,YAAY,CAErE,mBACExF,KAAA,QAAKmH,SAAS,CAAC,sBAAsB,CAAAtE,QAAA,eAEnC7C,KAAA,QAAKmH,SAAS,CAAC,cAAc,CAAAtE,QAAA,eAC3B7C,KAAA,QAAKmH,SAAS,CAAC,iBAAiB,CAAAtE,QAAA,EAAC,GAE/B,CAACkE,YAAY,CAACK,cAAc,CAACvG,SAAS,CAAE,CACtCwG,qBAAqB,CAAE,CAAC,CACxBC,qBAAqB,CAAE,CACzB,CAAC,CAAC,EACC,CAAC,cACNtH,KAAA,QACEmH,SAAS,qBAAAtC,MAAA,CAAsBmC,aAAa,EAAI,CAAC,CAAG,MAAM,CAAG,MAAM,CAAG,CAAAnE,QAAA,EAErEmE,aAAa,EAAI,CAAC,CAAG,GAAG,CAAG,GAAG,CAAE,GAAG,CACnCA,aAAa,CAACI,cAAc,CAACvG,SAAS,CAAE,CACvCwG,qBAAqB,CAAE,CAAC,CACxBC,qBAAqB,CAAE,CACzB,CAAC,CAAC,CAAE,GAAG,CAAC,GACP,CAACL,aAAa,CAAC,IAClB,EAAK,CAAC,EACH,CAAC,cAGNjH,KAAA,QAAKmH,SAAS,CAAC,oBAAoB,CAAAtE,QAAA,EAChC1C,UAAU,CAACiF,GAAG,CAAEjB,EAAE,eACjBjE,IAAA,WAEEiH,SAAS,kBAAAtC,MAAA,CACPV,EAAE,CAAC/D,KAAK,GAAKiD,SAAS,CAACjD,KAAK,CAAG,QAAQ,CAAG,EAAE,CAC3C,CACHmH,OAAO,CAAEA,CAAA,GAAMjE,YAAY,CAACa,EAAE,CAAE,CAAAtB,QAAA,CAE/BsB,EAAE,CAAC/D,KAAK,EANJ+D,EAAE,CAAC/D,KAOF,CACT,CAAC,CACDqD,OAAO,eAAIvD,IAAA,QAAKiH,SAAS,CAAC,QAAQ,CAAE,CAAC,EACnC,CAAC,cAGNjH,IAAA,QAAKiH,SAAS,CAAC,iBAAiB,CAAC1E,KAAK,CAAE,CAAE+E,IAAI,CAAE,CAAC,CAAEC,SAAS,CAAE,CAAE,CAAE,CAAA5E,QAAA,cAChE3C,IAAA,CAACJ,mBAAmB,EAAC4H,KAAK,CAAC,MAAM,CAACC,MAAM,CAAC,MAAM,CAAA9E,QAAA,cAC7C7C,KAAA,CAACP,SAAS,EACRsF,IAAI,CAAEhC,OAAQ,CACd6E,MAAM,CAAE,CAAEC,GAAG,CAAE,CAAC,CAAEC,KAAK,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAE,CAAE,CAAAnF,QAAA,eAEjD3C,IAAA,CAACP,KAAK,EACJsI,OAAO,CAAC,WAAW,CACnBC,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAC,MAAM,CACZC,MAAM,CAAE,CAAC,SAAS,CAAE,SAAS,CAAE,CAC/BC,IAAI,CAAE,KAAM,CACZC,QAAQ,CAAE,KAAM,CAChBX,MAAM,CAAE,CAAE,CACX,CAAC,cACFzH,IAAA,CAACN,KAAK,EACJwI,MAAM,CAAE7E,OAAQ,CAChBgF,aAAa,CAAGC,CAAC,EAAKA,CAAC,CAACzC,OAAO,CAAC,CAAC,CAAE,CACnC2B,KAAK,CAAE,CAAE,CACTW,IAAI,CAAE,KAAM,CACZI,IAAI,CAAE,KAAM,CACZH,QAAQ,CAAE,KAAM,CACjB,CAAC,cACFpI,IAAA,CAACL,OAAO,EAAC6I,OAAO,cAAExI,IAAA,CAACqB,aAAa,EAACI,OAAO,CAAEiF,kBAAmB,CAAE,CAAE,CAAE,CAAC,cACpE1G,IAAA,CAACR,IAAI,EACHwI,IAAI,CAAC,QAAQ,CACbD,OAAO,CAAC,cAAc,CACtBU,MAAM,CAAEzB,MAAM,CAAG,SAAS,CAAG,SAAU,CACvC0B,WAAW,CAAE,CAAE,CACfC,IAAI,CAAE3B,MAAM,CAAG,WAAW,CAAG,WAAY,CACzC4B,iBAAiB,CAAE,KAAM,CACzBC,GAAG,CAAE,KAAM,CACXC,SAAS,CAAE,CAAEC,CAAC,CAAE,CAAE,CAAE,CACrB,CAAC,EACO,CAAC,CACO,CAAC,CACnB,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnG,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}