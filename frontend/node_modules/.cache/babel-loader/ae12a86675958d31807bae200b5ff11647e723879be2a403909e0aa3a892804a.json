{"ast":null,"code":"var _jsxFileName = \"/Users/donaldtan/dons-website/frontend/src/components/InvestmentsComponent/PortfolioGraph.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/components/InvestmentsComponent/PortfolioGraph.jsx\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { AreaChart, Area, XAxis, YAxis, Tooltip, ResponsiveContainer } from \"recharts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TIMEFRAMES = [{\n  label: \"1D\",\n  span: \"day\",\n  interval: \"5minute\"\n}, {\n  label: \"1W\",\n  span: \"week\",\n  interval: \"hour\"\n}, {\n  label: \"1M\",\n  span: \"month\",\n  interval: \"hour\"\n}, {\n  label: \"3M\",\n  span: \"3month\",\n  interval: \"day\"\n}, {\n  label: \"1Y\",\n  span: \"year\",\n  interval: \"day\"\n}, {\n  label: \"5Y\",\n  span: \"5year\",\n  interval: \"day\"\n}];\nconst getNiceDomain = (min, max, ticks = 5) => {\n  if (min === max) return [Math.floor(min), Math.ceil(max)];\n  const range = max - min;\n  const roughStep = range / (ticks - 1);\n  const magnitude = Math.pow(10, Math.floor(Math.log10(roughStep)));\n  const niceStep = Math.ceil(roughStep / magnitude) * magnitude;\n  return [Math.floor(min / niceStep) * niceStep, Math.ceil(max / niceStep) * niceStep];\n};\n\n// CustomTooltip component moved outside and made pure\nconst CustomTooltip = ({\n  active,\n  payload,\n  label,\n  onHover\n}) => {\n  _s();\n  useEffect(() => {\n    if (active && payload && payload.length) {\n      const value = payload[0].value;\n      onHover(value);\n    } else {\n      onHover(null);\n    }\n  }, [active, payload, onHover]);\n  if (active && payload && payload.length) {\n    const date = new Date(label);\n    const formattedTime = date.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      hour12: false\n    });\n    const formattedDate = date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\"\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: \"0.8rem\",\n        color: \"#666\",\n        pointerEvents: \"none\"\n      },\n      children: [formattedDate, \" \", formattedTime]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_s(CustomTooltip, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = CustomTooltip;\nexport const PortfolioGraph = () => {\n  _s2();\n  const [history, setHistory] = useState([]);\n  const [portfolioValue, setPortfolioValue] = useState(0);\n  const [change, setChange] = useState(0);\n  const [timeframe, setTimeframe] = useState(TIMEFRAMES[0]);\n  const [yDomain, setYDomain] = useState([0, \"auto\"]);\n  const [loading, setLoading] = useState(false);\n\n  // Track hovered point\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const [hoveredChange, setHoveredChange] = useState(null);\n  const abortControllerRef = useRef(null);\n  const debounceRef = useRef(null);\n  const MAX_POINTS = 400;\n  const fetchHistory = async tf => {\n    var _abortControllerRef$c, _abortControllerRef$c2;\n    if (abortControllerRef.current) (_abortControllerRef$c = (_abortControllerRef$c2 = abortControllerRef.current).abort) === null || _abortControllerRef$c === void 0 ? void 0 : _abortControllerRef$c.call(_abortControllerRef$c2);\n    const controller = new AbortController();\n    abortControllerRef.current = controller;\n    setLoading(true);\n    try {\n      const res = await fetch(`http://127.0.0.1:5000/api/portfolio/history?span=${tf.span}&interval=${tf.interval}&max_points=${MAX_POINTS}`, {\n        signal: controller.signal\n      });\n      const data = await res.json();\n      if (!Array.isArray(data) || data.length === 0) {\n        setHistory([]);\n        setYDomain([0, \"auto\"]);\n        setPortfolioValue(0);\n        setChange(0);\n        return;\n      }\n      const formatted = data.map(p => ({\n        timestamp: new Date(p.timestamp).getTime(),\n        market_value: Number(p.market_value)\n      })).sort((a, b) => a.timestamp - b.timestamp);\n      setHistory(formatted);\n      const latest = formatted[formatted.length - 1].market_value;\n      const prev = formatted[0].market_value;\n      setPortfolioValue(latest);\n      setChange(Number((latest - prev).toFixed(2)));\n      const min = Math.min(...formatted.map(d => d.market_value));\n      const max = Math.max(...formatted.map(d => d.market_value));\n      setYDomain(getNiceDomain(min, max));\n    } catch (err) {\n      if (err.name !== \"AbortError\") console.error(\"History fetch failed:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (debounceRef.current) clearTimeout(debounceRef.current);\n    debounceRef.current = setTimeout(() => fetchHistory(timeframe), 150);\n    const intervalId = setInterval(() => fetchHistory(timeframe), 30000);\n    return () => {\n      var _abortControllerRef$c3, _abortControllerRef$c4;\n      clearTimeout(debounceRef.current);\n      clearInterval(intervalId);\n      (_abortControllerRef$c3 = abortControllerRef.current) === null || _abortControllerRef$c3 === void 0 ? void 0 : (_abortControllerRef$c4 = _abortControllerRef$c3.abort) === null || _abortControllerRef$c4 === void 0 ? void 0 : _abortControllerRef$c4.call(_abortControllerRef$c3);\n    };\n  }, [timeframe]);\n\n  // Handle tooltip hover\n  const handleTooltipHover = value => {\n    if (value !== null && history.length > 0) {\n      const baselineValue = history[0].market_value;\n      const pointChange = value - baselineValue;\n      setHoveredValue(value);\n      setHoveredChange(pointChange);\n    } else {\n      setHoveredValue(null);\n      setHoveredChange(null);\n    }\n  };\n  const displayValue = hoveredValue !== null ? hoveredValue : portfolioValue;\n  const displayChange = hoveredChange !== null ? hoveredChange : change;\n  const percentChange = history.length > 0 ? (displayChange / history[0].market_value * 100).toFixed(2) : \"0.00\";\n  const isGain = history.length > 1 && history[history.length - 1].market_value >= history[0].market_value;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"portfolio-graph-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"graph-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"portfolio-value\",\n        children: [\"$\", displayValue.toLocaleString(undefined, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `portfolio-change ${displayChange >= 0 ? \"gain\" : \"loss\"}`,\n        children: [displayChange >= 0 ? \"▲\" : \"▼\", \" \", displayChange.toLocaleString(undefined, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        }), \" \", \"(\", percentChange, \"%)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timeframe-selector\",\n      children: [TIMEFRAMES.map(tf => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `timeframe-btn ${tf.label === timeframe.label ? \"active\" : \"\"}`,\n        onClick: () => setTimeframe(tf),\n        children: tf.label\n      }, tf.label, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chart-container\",\n      style: {\n        flex: 1,\n        minHeight: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n        width: \"100%\",\n        height: \"100%\",\n        children: /*#__PURE__*/_jsxDEV(AreaChart, {\n          data: history,\n          margin: {\n            top: 0,\n            right: 0,\n            left: 0,\n            bottom: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"timestamp\",\n            type: \"number\",\n            scale: \"time\",\n            domain: [\"dataMin\", \"dataMax\"],\n            tick: false,\n            axisLine: false,\n            height: 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            domain: yDomain,\n            tickFormatter: v => v.toFixed(2),\n            width: 0,\n            tick: false,\n            line: false,\n            axisLine: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            content: /*#__PURE__*/_jsxDEV(CustomTooltip, {\n              onHover: handleTooltipHover\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Area, {\n            type: \"linear\",\n            dataKey: \"market_value\",\n            stroke: isGain ? \"#16a34a\" : \"#dc2626\",\n            strokeWidth: 2,\n            fill: isGain ? \"#16a34a33\" : \"#dc262633\",\n            isAnimationActive: false,\n            dot: false,\n            activeDot: {\n              r: 4\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 5\n  }, this);\n};\n_s2(PortfolioGraph, \"2lwGCuh5LLlDA98pxhnQbcIXYpY=\");\n_c2 = PortfolioGraph;\nexport default PortfolioGraph;\nvar _c, _c2;\n$RefreshReg$(_c, \"CustomTooltip\");\n$RefreshReg$(_c2, \"PortfolioGraph\");","map":{"version":3,"names":["React","useEffect","useState","useRef","AreaChart","Area","XAxis","YAxis","Tooltip","ResponsiveContainer","jsxDEV","_jsxDEV","TIMEFRAMES","label","span","interval","getNiceDomain","min","max","ticks","Math","floor","ceil","range","roughStep","magnitude","pow","log10","niceStep","CustomTooltip","active","payload","onHover","_s","length","value","date","Date","formattedTime","toLocaleTimeString","hour","minute","hour12","formattedDate","toLocaleDateString","month","day","year","style","fontSize","color","pointerEvents","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","PortfolioGraph","_s2","history","setHistory","portfolioValue","setPortfolioValue","change","setChange","timeframe","setTimeframe","yDomain","setYDomain","loading","setLoading","hoveredValue","setHoveredValue","hoveredChange","setHoveredChange","abortControllerRef","debounceRef","MAX_POINTS","fetchHistory","tf","_abortControllerRef$c","_abortControllerRef$c2","current","abort","call","controller","AbortController","res","fetch","signal","data","json","Array","isArray","formatted","map","p","timestamp","getTime","market_value","Number","sort","a","b","latest","prev","toFixed","d","err","name","console","error","clearTimeout","setTimeout","intervalId","setInterval","_abortControllerRef$c3","_abortControllerRef$c4","clearInterval","handleTooltipHover","baselineValue","pointChange","displayValue","displayChange","percentChange","isGain","className","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","onClick","flex","minHeight","width","height","margin","top","right","left","bottom","dataKey","type","scale","domain","tick","axisLine","tickFormatter","v","line","content","stroke","strokeWidth","fill","isAnimationActive","dot","activeDot","r","_c2","$RefreshReg$"],"sources":["/Users/donaldtan/dons-website/frontend/src/components/InvestmentsComponent/PortfolioGraph.js"],"sourcesContent":["// src/components/InvestmentsComponent/PortfolioGraph.jsx\nimport React, { useEffect, useState, useRef } from \"react\";\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n} from \"recharts\";\n\nconst TIMEFRAMES = [\n  { label: \"1D\", span: \"day\", interval: \"5minute\" },\n  { label: \"1W\", span: \"week\", interval: \"hour\" },\n  { label: \"1M\", span: \"month\", interval: \"hour\" },\n  { label: \"3M\", span: \"3month\", interval: \"day\" },\n  { label: \"1Y\", span: \"year\", interval: \"day\" },\n  { label: \"5Y\", span: \"5year\", interval: \"day\" },\n];\n\nconst getNiceDomain = (min, max, ticks = 5) => {\n  if (min === max) return [Math.floor(min), Math.ceil(max)];\n  const range = max - min;\n  const roughStep = range / (ticks - 1);\n  const magnitude = Math.pow(10, Math.floor(Math.log10(roughStep)));\n  const niceStep = Math.ceil(roughStep / magnitude) * magnitude;\n  return [\n    Math.floor(min / niceStep) * niceStep,\n    Math.ceil(max / niceStep) * niceStep,\n  ];\n};\n\n// CustomTooltip component moved outside and made pure\nconst CustomTooltip = ({ active, payload, label, onHover }) => {\n  useEffect(() => {\n    if (active && payload && payload.length) {\n      const value = payload[0].value;\n      onHover(value);\n    } else {\n      onHover(null);\n    }\n  }, [active, payload, onHover]);\n\n  if (active && payload && payload.length) {\n    const date = new Date(label);\n    const formattedTime = date.toLocaleTimeString(\"en-US\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      hour12: false,\n    });\n    const formattedDate = date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\",\n    });\n\n    return (\n      <div\n        style={{\n          fontSize: \"0.8rem\",\n          color: \"#666\",\n          pointerEvents: \"none\",\n        }}\n      >\n        {formattedDate} {formattedTime}\n      </div>\n    );\n  }\n  return null;\n};\n\nexport const PortfolioGraph = () => {\n  const [history, setHistory] = useState([]);\n  const [portfolioValue, setPortfolioValue] = useState(0);\n  const [change, setChange] = useState(0);\n  const [timeframe, setTimeframe] = useState(TIMEFRAMES[0]);\n  const [yDomain, setYDomain] = useState([0, \"auto\"]);\n  const [loading, setLoading] = useState(false);\n\n  // Track hovered point\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const [hoveredChange, setHoveredChange] = useState(null);\n\n  const abortControllerRef = useRef(null);\n  const debounceRef = useRef(null);\n\n  const MAX_POINTS = 400;\n\n  const fetchHistory = async (tf) => {\n    if (abortControllerRef.current) abortControllerRef.current.abort?.();\n    const controller = new AbortController();\n    abortControllerRef.current = controller;\n\n    setLoading(true);\n    try {\n      const res = await fetch(\n        `http://127.0.0.1:5000/api/portfolio/history?span=${tf.span}&interval=${tf.interval}&max_points=${MAX_POINTS}`,\n        { signal: controller.signal }\n      );\n      const data = await res.json();\n\n      if (!Array.isArray(data) || data.length === 0) {\n        setHistory([]);\n        setYDomain([0, \"auto\"]);\n        setPortfolioValue(0);\n        setChange(0);\n        return;\n      }\n\n      const formatted = data\n        .map((p) => ({\n          timestamp: new Date(p.timestamp).getTime(),\n          market_value: Number(p.market_value),\n        }))\n        .sort((a, b) => a.timestamp - b.timestamp);\n\n      setHistory(formatted);\n\n      const latest = formatted[formatted.length - 1].market_value;\n      const prev = formatted[0].market_value;\n      setPortfolioValue(latest);\n      setChange(Number((latest - prev).toFixed(2)));\n\n      const min = Math.min(...formatted.map((d) => d.market_value));\n      const max = Math.max(...formatted.map((d) => d.market_value));\n      setYDomain(getNiceDomain(min, max));\n    } catch (err) {\n      if (err.name !== \"AbortError\")\n        console.error(\"History fetch failed:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (debounceRef.current) clearTimeout(debounceRef.current);\n    debounceRef.current = setTimeout(() => fetchHistory(timeframe), 150);\n    const intervalId = setInterval(() => fetchHistory(timeframe), 30000);\n    return () => {\n      clearTimeout(debounceRef.current);\n      clearInterval(intervalId);\n      abortControllerRef.current?.abort?.();\n    };\n  }, [timeframe]);\n\n  // Handle tooltip hover\n  const handleTooltipHover = (value) => {\n    if (value !== null && history.length > 0) {\n      const baselineValue = history[0].market_value;\n      const pointChange = value - baselineValue;\n      setHoveredValue(value);\n      setHoveredChange(pointChange);\n    } else {\n      setHoveredValue(null);\n      setHoveredChange(null);\n    }\n  };\n\n  const displayValue = hoveredValue !== null ? hoveredValue : portfolioValue;\n  const displayChange = hoveredChange !== null ? hoveredChange : change;\n\n  const percentChange =\n    history.length > 0\n      ? ((displayChange / history[0].market_value) * 100).toFixed(2)\n      : \"0.00\";\n\n  const isGain =\n    history.length > 1 &&\n    history[history.length - 1].market_value >= history[0].market_value;\n\n  return (\n    <div className=\"portfolio-graph-card\">\n      {/* Header */}\n      <div className=\"graph-header\">\n        <div className=\"portfolio-value\">\n          $\n          {displayValue.toLocaleString(undefined, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n          })}\n        </div>\n        <div\n          className={`portfolio-change ${displayChange >= 0 ? \"gain\" : \"loss\"}`}\n        >\n          {displayChange >= 0 ? \"▲\" : \"▼\"}{\" \"}\n          {displayChange.toLocaleString(undefined, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n          })}{\" \"}\n          ({percentChange}%)\n        </div>\n      </div>\n\n      {/* Timeframe Selector */}\n      <div className=\"timeframe-selector\">\n        {TIMEFRAMES.map((tf) => (\n          <button\n            key={tf.label}\n            className={`timeframe-btn ${\n              tf.label === timeframe.label ? \"active\" : \"\"\n            }`}\n            onClick={() => setTimeframe(tf)}\n          >\n            {tf.label}\n          </button>\n        ))}\n        {loading && <div className=\"loader\" />}\n      </div>\n\n      {/* Chart */}\n      <div className=\"chart-container\" style={{ flex: 1, minHeight: 0 }}>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart\n            data={history}\n            margin={{ top: 0, right: 0, left: 0, bottom: 0 }}\n          >\n            <XAxis\n              dataKey=\"timestamp\"\n              type=\"number\"\n              scale=\"time\"\n              domain={[\"dataMin\", \"dataMax\"]}\n              tick={false}\n              axisLine={false}\n              height={0}\n            />\n            <YAxis\n              domain={yDomain}\n              tickFormatter={(v) => v.toFixed(2)}\n              width={0}\n              tick={false}\n              line={false}\n              axisLine={false}\n            />\n            <Tooltip content={<CustomTooltip onHover={handleTooltipHover} />} />\n            <Area\n              type=\"linear\"\n              dataKey=\"market_value\"\n              stroke={isGain ? \"#16a34a\" : \"#dc2626\"}\n              strokeWidth={2}\n              fill={isGain ? \"#16a34a33\" : \"#dc262633\"}\n              isAnimationActive={false}\n              dot={false}\n              activeDot={{ r: 4 }}\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default PortfolioGraph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}